# Engineering Ideation Log

## Cycle Date: 2026-02-05
## Target: `tools/budget-optimizer/manager.js`

### Critique
As a Senior Software Engineer reviewing the `budget-optimizer`, I've identified several areas for improvement:

1. **Wait Logic**: The current RPM protection returns a hard-coded `waitSeconds: 60`. This is inefficient. Implementing an exponential backoff would allow the system to resume as soon as the limit window shifts, rather than waiting a full minute every time a burst occurs.
2. **Task Dependencies**: The backlog is a flat list. There is no concept of task dependencies (e.g., Task B cannot start until Task A is finished). This limits the complexity of automated workflows.
3. **State Bloat**: The `state.json` file grows indefinitely as tasks are completed. There is no built-in mechanism to archive or rotate completed tasks.
4. **Resilience**: The `loadState` and `saveState` functions are synchronous and use `fs.readFileSync/writeFileSync`. While fine for a single-agent local setup, it could cause race conditions if multiple sub-agents or processes attempt to access the state simultaneously.

### Ideated Tasks
1. **Implement Exponential Backoff**: Modify `getDynamicStatus` to track burst frequency and suggest shorter, more precise wait times based on the 1-minute rolling window.
2. **Task Dependency Support**: Add a `blockedBy` array to the task schema and update `getNextTask` to skip blocked tasks.
3. **History/Cleanup Command**: Add a CLI command to prune completed tasks older than X days or move them to `history.json`.

---
*Log generated by Zown during Engineering Ideation Cycle.*
